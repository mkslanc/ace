<!DOCTYPE html>
<html lang="en">
<head>
    <title>Ace-diff - Simple Demo #1</title>
    
    <script src="../demo/kitchen-sink/require.js"></script>
     
    <style type="text/css">
        .ace_diff-container {
            top: 0;
            left: 0;
            bottom: 0;
            right: 0;
        }
    </style>
</head>
<body>

<div class="ace_diff-container"></div>

<script>
    var paths = {
        "ace": "../src",
      "ace-code": "..",
      diff: "."
    }
    
    require.config({
        paths: paths
    });
    
    
    
    require(["diff/twoway"], function() {

        var config = require("ace-code/src/config");
        config.setLoader(function(moduleName, cb) {
            require([moduleName], function(module) {
                cb(null, module);
            });
        });
        
        var useLocalStorage = /save=1/.test(location.search)
        
        var DiffView = require("diff/twoway").DiffView;
        var diffView = new DiffView(document.querySelector(".ace_diff-container"), {});
        window.diffView = diffView;
        
        require("ace-code/src/lib/net").get("./diff/0.ts", function(v) {
            
            diffView.left.setValue(useLocalStorage && localStorage.orig || v, -1);
            diffView.left.session.setMode("ace-code/src/mode/typescript");
        });
        require("ace-code/src/lib/net").get("./diff/1.ts", function(v) {
            diffView.right.setValue(useLocalStorage && localStorage.edit || v, -1);
            diffView.right.session.setMode("ace-code/src/mode/typescript");
        });

        window.onbeforeunload = function() {
            if (!useLocalStorage) return;
            localStorage.orig = diffView.orig.getValue()
            localStorage.edit = diffView.edit.getValue()
        }
    });

</script>



</body>
</html>
